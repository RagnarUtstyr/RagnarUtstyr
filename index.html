<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="64x64" href="favicon-64x64.png">
    <title>Submit Your Name and Number</title>
    <script type="module" src="server.js" defer></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <h1>Enter Name and Initiative</h1>
		<label for="name">Name:</label>
		<input type="text" id="name" required>
		
		<label for="initiative">Initiative:</label>
		<input type="number" id="initiative" required>
		<br><br>
        <button id="submit-button">Submit</button>

       

        <!-- Audio element to play sound -->
        <audio id="sword-sound" src="sword.mp3" preload="auto"></audio>
    </div>

    <div class="container">
        <h1>Join a Room</h1>
        <label for="room-key">Room Key:</label>
        <input type="text" id="room-key" placeholder="Enter room key">
        <button id="join-room-button">Join Room</button>

        <script>
            document.getElementById('login-button').addEventListener('click', async () => {
                const roomKey = document.getElementById('room-key').value.trim();
                
                if (roomKey) {
                    const dbRef = ref(db, `rankings/${roomKey}`);
                    
                    // Check if the room key exists in Firebase
                    const snapshot = await get(dbRef);
                    if (snapshot.exists()) {
                        localStorage.setItem('roomKey', roomKey); // Store room key in localStorage
                        window.location.href = 'group.html'; // Redirect to group.html
                    } else {
                        alert('Invalid room key. Please try again.');
                    }
                } else {
                    alert('Please enter a room key.');
                }
            });
        </script>
    </div>
</body>

</html>
